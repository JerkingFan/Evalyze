# Evalyze Node.js Backend

–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞ —Å Java Spring –Ω–∞ Node.js —Å Express –∏ Supabase.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Express.js** - –±—ã—Å—Ç—Ä—ã–π –∏ –≥–∏–±–∫–∏–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Supabase** - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å JavaScript SDK
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
- **RESTful API** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –º–µ—Ç–æ–¥—ã –∏ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
NODEJS/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Supabase, JWT, –ë–î)
‚îú‚îÄ‚îÄ controllers/      # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ models/          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ repositories/    # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îú‚îÄ‚îÄ routes/          # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ server.js        # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ package.json     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ env.example      # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd NODEJS
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

### 3. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
npm run dev
```

### 4. –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
```bash
npm start
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# Server Configuration
PORT=8089
NODE_ENV=development

# Supabase Configuration
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=24h

# Google OAuth Configuration
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:8089/api/auth/google/callback

# n8n Webhook URLs
WEBHOOK_ANALYZE_COMPETENCIES=https://guglovskij.app.n8n.cloud/webhook/0d0a654b-772e-447a-9223-8b443f788175
WEBHOOK_ASSIGN_JOB_ROLE=https://guglovskij.app.n8n.cloud/webhook/113447c6-c39e-410c-ab15-4f5ab7809fd9
WEBHOOK_GENERATE_AI_PROFILE=https://guglovskij.app.n8n.cloud/webhook/bbd2959f-bedc-43fc-a558-69c0fe7b4db

# File Upload Configuration
UPLOAD_DIR=uploads
MAX_FILE_SIZE=10485760

# CORS Configuration
CORS_ORIGIN=http://localhost:3000
```

## üìö API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)
- `POST /register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /login` - –í—Ö–æ–¥ –ø–æ email/–ø–∞—Ä–æ–ª—é
- `POST /login/activation-code` - –í—Ö–æ–¥ –ø–æ –∫–æ–¥—É –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- `GET /google/callback` - Google OAuth callback
- `GET /me` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /me` - –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ—Ñ–∏–ª–∏ (`/api/profile`)
- `POST /` - –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `GET /me` - –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `GET /user/:userId` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /:profileId/generate-ai` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI –ø—Ä–æ—Ñ–∏–ª—è (–ö–Ω–æ–ø–∫–∞ 3)
- `POST /:userId/assign-job-role` - –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å (–ö–Ω–æ–ø–∫–∞ 2)
- `POST /employee` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### –§–∞–π–ª—ã (`/api/files`)
- `POST /upload` - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã
- `GET /my-files` - –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–∏ —Ñ–∞–π–ª—ã
- `GET /storage-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- `DELETE /:fileId` - –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª

### –í–µ–±—Ö—É–∫–∏ (`/api/webhooks`)
- `GET /config` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–µ–±—Ö—É–∫–æ–≤
- `POST /test-all` - –¢–µ—Å—Ç –≤—Å–µ—Ö –≤–µ–±—Ö—É–∫–æ–≤
- `POST /analyze-competencies` - –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π (–ö–Ω–æ–ø–∫–∞ 1)
- `POST /assign-job-role` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–∏
- `POST /generate-ai-profile` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI –ø—Ä–æ—Ñ–∏–ª—è

### –ö–æ–º–ø–∞–Ω–∏–∏ (`/api/company`)
- `GET /` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `POST /` - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
- `GET /:id` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
- `PUT /:id` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
- `DELETE /:id` - –£–¥–∞–ª–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
- `GET /:id/job-roles` - –†–æ–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏

### –ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã (`/api/health`)
- `GET /` - –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å
- `GET /database` - –°—Ç–∞—Ç—É—Å –ë–î
- `GET /system` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
Authorization: Bearer <your_jwt_token>
```

## üìä –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

### –ö–Ω–æ–ø–∫–∞ 1: –ê–Ω–∞–ª–∏–∑ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ n8n –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- Webhook: `WEBHOOK_ANALYZE_COMPETENCIES`

### –ö–Ω–æ–ø–∫–∞ 2: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–∏
- –í—ã–±–æ—Ä —Ä–æ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ job_roles
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `users.Role`
- Webhook: `WEBHOOK_ASSIGN_JOB_ROLE`

### –ö–Ω–æ–ø–∫–∞ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI –ø—Ä–æ—Ñ–∏–ª—è
- –°–±–æ—Ä –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ n8n –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Webhook: `WEBHOOK_GENERATE_AI_PROFILE`

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase (PostgreSQL) —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `companies` - –∫–æ–º–ø–∞–Ω–∏–∏
- `job_roles` - —Ä–æ–ª–∏ –≤ –∫–æ–º–ø–∞–Ω–∏–∏
- `file_uploads` - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ
```bash
npm install
npm run dev
```

### Docker
```bash
docker build -t evalyze-nodejs .
docker run -p 8089:8089 evalyze-nodejs
```

### PM2
```bash
npm install -g pm2
pm2 start server.js --name evalyze-backend
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
npm test

# –¢–µ—Å—Ç API endpoints
curl http://localhost:8089/api/health
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Morgan –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π console.log –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## üîß –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `NODE_ENV=development` –≤ .env —Ñ–∞–π–ª–µ.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
3. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –°—Ç–∞—Ç—É—Å –≤–µ–±—Ö—É–∫–æ–≤

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ê–≤—Ç–æ—Ä:** Evalyze Team  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT
