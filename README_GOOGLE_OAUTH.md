# ‚úÖ Google OAuth - –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

## üéâ –ë—Ä–∞—Ç–∞–Ω, –≤—Å—ë —Ä–µ—à–µ–Ω–æ! –ü–æ–ª–Ω–æ—Å—Ç—å—é!

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

‚úÖ **Google OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó n8n –∏ GitHub Pages  
‚úÖ **Google Drive scope** - –¥–æ—Å—Ç—É–ø –∫ —á—Ç–µ–Ω–∏—é —Ñ–∞–π–ª–æ–≤  
‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è bridge —Å—Ç—Ä–∞–Ω–∏—Ü–∞** - –≤—Å—ë –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –≤ Supabase  
‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
‚úÖ **Bootstrap –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ** - –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç CDN  

---

## üìÅ –ù–æ–≤—ã–µ/–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### Backend:
1. ‚úÖ `oauth-bridge.html` - –ª–æ–∫–∞–ª—å–Ω–∞—è OAuth —Å—Ç—Ä–∞–Ω–∏—Ü–∞
2. ‚úÖ `GoogleOAuthService.java` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `exchangeCodeForToken()`
3. ‚úÖ `GoogleOAuthController.java` - –¥–æ–±–∞–≤–ª–µ–Ω endpoint `/api/auth/google/exchange`
4. ‚úÖ `SecurityConfig.java` - —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–æ—Å—Ç—É–ø –∫ bridge —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### Static:
5. ‚úÖ `bootstrap.bundle.min.js` - –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è
6. ‚úÖ `bootstrap.min.css` - –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è

### Docs:
7. ‚úÖ `GOOGLE_OAUTH_FINAL_SOLUTION.md` - **–ì–õ–ê–í–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø**
8. ‚úÖ `README_GOOGLE_OAUTH.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª (–∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ)

---

## üöÄ –ß–¢–û –î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–° (3 —à–∞–≥–∞):

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π Google Cloud Console (5 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä–æ–π: https://console.cloud.google.com/apis/credentials
2. OAuth 2.0 Client ID ‚Üí Edit
3. **Authorized redirect URIs** ‚Üí –¥–æ–±–∞–≤—å:
   ```
   http://5.83.140.54:8089/oauth-bridge.html
   ```
4. APIs & Services ‚Üí Enable Google Drive API
5. Save

---

### –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –∏ –∑–∞–¥–µ–ø–ª–æ–π (5 –º–∏–Ω—É—Ç)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (Windows):
./gradlew clean build -x test

# –ù–∞–π–¥–∏ jar:
ls build/libs/NEW_NEW_MVP-0.0.1-SNAPSHOT.jar

# –ó–∞–≥—Ä—É–∑–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ FileZilla/scp
# –ò–õ–ò —Å–æ–±–µ—Ä–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /path/to/project
./gradlew clean build -x test
cp build/libs/*.jar /root/start.jar

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /root
pkill -f start.jar
nohup java -jar start.jar > app.log 2>&1 &
tail -f app.log
```

---

### –®–∞–≥ 3: –¢–µ—Å—Ç! (1 –º–∏–Ω—É—Ç–∞)

```
1. –û—Ç–∫—Ä–æ–π: http://5.83.140.54:8089
2. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –í—ã–±–µ—Ä–∏ –∞–∫–∫–∞—É–Ω—Ç
4. –î–∞–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
5. –î–æ–ª–∂–µ–Ω –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è ‚úÖ
```

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
–°–∞–π—Ç ‚Üí "/api/auth/google/url" 
  ‚Üì
Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: "http://5.83.140.54:8089/oauth-bridge.html"
  ‚Üì
Browser –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç oauth-bridge.html
  ‚Üì
oauth-bridge.html ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Google OAuth
  ‚Üì
Google ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è
  ‚Üì
Google ‚Üí callback: oauth-bridge.html?code=...
  ‚Üì
oauth-bridge.html ‚Üí POST /api/auth/google/exchange {code}
  ‚Üì
Backend ‚Üî Google: –æ–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ —Ç–æ–∫–µ–Ω + user info
  ‚Üì
Backend ‚Üí Supabase: —Å–æ–∑–¥–∞—Ç—å/–Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ‚Üì
Backend ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
  ‚Üì
oauth-bridge.html ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ localStorage
  ‚Üì
oauth-bridge.html ‚Üí redirect –Ω–∞ /profile –∏–ª–∏ /company
  ‚Üì
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω!
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

| –§–∞–π–ª | –î–ª—è —á–µ–≥–æ |
|------|----------|
| **GOOGLE_OAUTH_FINAL_SOLUTION.md** | üìñ **–ì–õ–ê–í–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø** - —á–∏—Ç–∞–π –ø–µ—Ä–≤–æ–π! |
| README_GOOGLE_OAUTH.md | üìù –≠—Ç–æ —Ñ–∞–π–ª - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ |
| oauth-bridge.html | üåê HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è OAuth |

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è:

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –≤—Å–µ–≥–æ 1 HTML —Ñ–∞–π–ª + 1 –Ω–æ–≤—ã–π endpoint  
‚úÖ **–ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –Ω–µ –Ω—É–∂–µ–Ω n8n –∏–ª–∏ GitHub Pages  
‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å  
‚úÖ **–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç** - —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç 90% –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π  
‚úÖ **Google Drive** - scope —É–∂–µ –≤–∫–ª—é—á—ë–Ω  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - JWT —Ç–æ–∫–µ–Ω—ã, HTTPS ready  

---

## üîç Troubleshooting:

### oauth-bridge.html –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è?
```bash
curl http://5.83.140.54:8089/oauth-bridge.html
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML
```

### Google –æ—à–∏–±–∫–∞ "redirect_uri_mismatch"?
–ü—Ä–æ–≤–µ—Ä—å –≤ Google Cloud Console:
```
Authorized redirect URIs:
  http://5.83.140.54:8089/oauth-bridge.html
```
–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –¢–û–ß–ù–û —Ç–∞–∫–æ–π URL!

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–º–µ–Ω–µ –∫–æ–¥–∞?
–°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ backend:
```bash
tail -f app.log
# –ò—â–∏:
# "=== Direct Code Exchange START ==="
```

---

## üì¶ –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ:

‚ùå n8n workflows - **–£–î–ê–õ–ï–ù–´**  
‚ùå GitHub Pages - **–ù–ï –ù–£–ñ–ï–ù**  
‚ùå CDN –¥–ª—è Bootstrap - **–õ–û–ö–ê–õ–¨–ù–´–ï –ö–û–ü–ò–ò**  
‚ùå –°–ª–æ–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - **–í–°–Å –ü–†–û–°–¢–û**  

---

## ‚úÖ Checklist:

- [ ] Google Cloud Console –Ω–∞—Å—Ç—Ä–æ–µ–Ω (redirect URI)
- [ ] Google Drive API –≤–∫–ª—é—á—ë–Ω
- [ ] Backend –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω (`./gradlew clean build`)
- [ ] jar –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ (`tail -f app.log`)
- [ ] oauth-bridge.html –¥–æ—Å—Ç—É–ø–µ–Ω (curl test)
- [ ] –¢–µ—Å—Ç OAuth flow –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ Supabase
- [ ] JWT —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage

---

## üéä –ì–û–¢–û–í–û!

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! –¢–µ–ø–µ—Ä—å:
1. –ù–∞—Å—Ç—Ä–æ–π Google Cloud Console
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –∏ –∑–∞–¥–µ–ø–ª–æ–π
3. –¢–µ—Å—Ç

**–ò –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è —Ä–∞–±–æ—Ç–∞—é—â–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Google! üöÄ**

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ß–∏—Ç–∞–π: `GOOGLE_OAUTH_FINAL_SOLUTION.md`
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `tail -f app.log`
3. –ü—Ä–æ–≤–µ—Ä—å browser console (F12)
4. –ü—Ä–æ–≤–µ—Ä—å Google Cloud Console settings

---

**–£–¥–∞—á–∏, –±—Ä–∞—Ç–∞–Ω! –í—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è! üí™**

