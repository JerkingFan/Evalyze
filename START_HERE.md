# üöÄ Google OAuth —á–µ—Ä–µ–∑ n8n - –°—Ç–∞—Ä—Ç

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Google —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ **n8n webhook** –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Google OAuth API.

**Webhook URL:** `https://guglovskij.app.n8n.cloud/webhook/07a96af0-9f1f-44e7-bad3-86a2c4e0cb28`

---

## üìÇ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend (Java/Spring Boot)
- ‚úÖ `GoogleOAuthService.java` - —É–ø—Ä–æ—â—ë–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å n8n
- ‚úÖ `GoogleOAuthController.java` - –Ω–æ–≤—ã–µ endpoints
- ‚úÖ `application.properties` - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å—Ç–∞—Ä—ã–µ OAuth –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ `build.gradle` - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å oauth2-client

### Frontend (JavaScript)
- ‚úÖ `app.js` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìÑ `GOOGLE_OAUTH_N8N.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üìÑ `GOOGLE_OAUTH_N8N_SUMMARY.md` - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
- üìÑ `N8N_WEBHOOK_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ n8n
- üìÑ `START_HERE.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å n8n Workflow
üìñ **–ß–∏—Ç–∞–π—Ç–µ:** `N8N_WEBHOOK_SETUP.md`

–ö—Ä–∞—Ç–∫–æ:
1. –°–æ–∑–¥–∞–π—Ç–µ workflow –≤ n8n
2. –î–æ–±–∞–≤—å—Ç–µ Webhook node
3. –î–æ–±–∞–≤—å—Ç–µ Google OAuth node
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ redirect –Ω–∞ backend

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
./gradlew clean build

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
./gradlew bootRun
```

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://5.83.140.54:8089`
2. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –î–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ n8n

---

## üîç –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Backend –¥–æ—Å—Ç—É–ø–µ–Ω
```bash
curl http://5.83.140.54:8089/api/auth/google/url
# –û–∂–∏–¥–∞–µ—Ç—Å—è: https://guglovskij.app.n8n.cloud/webhook/07a96af0-9f1f-44e7-bad3-86a2c4e0cb28
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: n8n webhook –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
curl https://guglovskij.app.n8n.cloud/webhook/07a96af0-9f1f-44e7-bad3-86a2c4e0cb28
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 404
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É Network
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
4. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º–∏

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `GOOGLE_OAUTH_N8N.md` | üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ API |
| `GOOGLE_OAUTH_N8N_SUMMARY.md` | üìù –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `N8N_WEBHOOK_SETUP.md` | ‚öôÔ∏è –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ n8n workflow |
| `START_HERE.md` | üöÄ –≠—Ç–æ—Ç —Ñ–∞–π–ª - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |

---

## üîß API Endpoints (–∏–∑–º–µ–Ω–µ–Ω–∏—è)

### –ù–æ–≤—ã–π endpoint
```
POST /api/auth/google/authenticate
Body: { "token": "google_access_token" }
Response: JWT token –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ endpoints
```
GET /api/auth/google/url
‚Üí –¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç n8n webhook URL

GET /api/auth/google/callback
‚Üí –¢–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback –æ—Ç n8n
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **n8n workflow –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù** - –±–µ–∑ –Ω–µ–≥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
2. **Google credentials** —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ n8n, –ù–ï –≤ backend
3. **JWT —Ç–æ–∫–µ–Ω—ã** –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ backend
4. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

---

## üêõ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞: "OAuth via n8n failed"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ n8n workflow –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL webhook

### –û—à–∏–±–∫–∞: "Email not received"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ n8n –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ "email"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç n8n
3. –°–º. –ø—Ä–∏–º–µ—Ä—ã –≤ `N8N_WEBHOOK_SETUP.md`

### –û—à–∏–±–∫–∞: CORS
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –≤ n8n webhook settings
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç n8n

### –û—à–∏–±–∫–∞: 404 –Ω–∞ callback
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ n8n redirect

---

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ backend
```bash
# –í –∫–æ–Ω—Å–æ–ª–∏ Spring Boot –∏—â–∏—Ç–µ:
=== Google OAuth via n8n START ===
Token received: ...
n8n webhook response: ...
User info from n8n: email=...
=== Google OAuth via n8n SUCCESS ===
```

### –û—Ç–ª–∞–¥–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
1. F12 ‚Üí Network tab
2. –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º–∏
3. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL
4. –°–º–æ—Ç—Ä–∏—Ç–µ localStorage –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ n8n workflow –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ n8n (`N8N_WEBHOOK_SETUP.md`)
2. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
4. ‚úÖ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - –æ—Ç–ª–∞–¥–∫–∞ –ø–æ –ª–æ–≥–∞–º

---

**–í–æ–ø—Ä–æ—Å—ã?** –ß–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `GOOGLE_OAUTH_N8N.md`

**–£–¥–∞—á–∏! üöÄ**

